# æ£€æŸ¥å‰ç«¯ä»£ç æ˜¯å¦å·²æ›´æ–°

## ğŸ” é—®é¢˜åˆ†æ

ä»æµ‹è¯•ç»“æœçœ‹ï¼š
- âœ… **æ‰‹åŠ¨æµ‹è¯•è¯·æ±‚æˆåŠŸ**ï¼šåç«¯ API æ­£å¸¸å·¥ä½œï¼Œè¯·æ±‚å·²è®°å½•
- âŒ **åŠ¨æ€å¯¼å…¥ä»ç„¶å¤±è´¥**ï¼šè¯´æ˜å‰ç«¯ä»£ç å¯èƒ½è¿˜æ²¡æœ‰æ›´æ–°ï¼Œæˆ–è€…æµè§ˆå™¨ç¼“å­˜äº†æ—§ä»£ç 

## ğŸ§ª æ£€æŸ¥å‰ç«¯ä»£ç æ˜¯å¦å·²æ›´æ–°

åœ¨æµè§ˆå™¨æ§åˆ¶å°æ‰§è¡Œä»¥ä¸‹ä»£ç ï¼Œæ£€æŸ¥å‰ç«¯ä»£ç æ˜¯å¦å·²ç»æ›´æ–°ï¼š

```javascript
// æ£€æŸ¥ getApiBaseUrl æ˜¯å¦åœ¨å…¨å±€ä½œç”¨åŸŸå¯ç”¨ï¼ˆé€šè¿‡é™æ€å¯¼å…¥ï¼‰
console.log('=== æ£€æŸ¥å‰ç«¯ä»£ç ç‰ˆæœ¬ ===');

// æ–¹æ³• 1: æ£€æŸ¥ window å¯¹è±¡ï¼ˆå¦‚æœä»£ç æš´éœ²äº†ï¼‰
if (window.getApiBaseUrl) {
  console.log('âœ… getApiBaseUrl åœ¨ window å¯¹è±¡ä¸­å¯ç”¨');
} else {
  console.log('âš ï¸ getApiBaseUrl ä¸åœ¨ window å¯¹è±¡ä¸­ï¼ˆè¿™æ˜¯æ­£å¸¸çš„ï¼Œå› ä¸ºå®ƒæ˜¯æ¨¡å—å¯¼å…¥ï¼‰');
}

// æ–¹æ³• 2: æ£€æŸ¥ App ç»„ä»¶æ˜¯å¦ä½¿ç”¨äº†é™æ€å¯¼å…¥
// é€šè¿‡æ£€æŸ¥é¡µé¢æºç æˆ–æ„å»ºåçš„ä»£ç 
console.log('=== æ£€æŸ¥æ–¹æ³•ï¼šæŸ¥çœ‹ Network é¢æ¿ä¸­çš„ JS æ–‡ä»¶ ===');
console.log('1. æ‰“å¼€ Network é¢æ¿');
console.log('2. åˆ·æ–°é¡µé¢');
console.log('3. æ‰¾åˆ°ä¸»è¦çš„ JS æ–‡ä»¶ï¼ˆå¦‚ index-xxx.jsï¼‰');
console.log('4. å³é”®ç‚¹å‡» â†’ "åœ¨æ–°æ ‡ç­¾é¡µä¸­æ‰“å¼€"');
console.log('5. æŒ‰ Ctrl+F æœç´¢ "getApiBaseUrl"');
console.log('6. å¦‚æœæ‰¾åˆ°ï¼Œè¯´æ˜ä»£ç å·²æ›´æ–°');

// æ–¹æ³• 3: æ£€æŸ¥æ§åˆ¶å°æ—¥å¿—
console.log('=== æ£€æŸ¥æ§åˆ¶å°æ—¥å¿— ===');
console.log('åˆ·æ–°é¡µé¢åï¼Œåº”è¯¥çœ‹åˆ°ä»¥ä¸‹æ—¥å¿—ï¼š');
console.log('[App] ğŸ” Analytics useEffect triggered');
console.log('[App] ğŸ” getApiBaseUrl function available: function');
console.log('[App] ğŸ” sessionStorage rabbit_visit_recorded: null');
console.log('[App] âœ… Starting to record page visit...');
console.log('[App] ğŸ” Current API Base URL: https://rabbit-ai-backend.onrender.com/api/');
console.log('');
console.log('å¦‚æœæ²¡æœ‰çœ‹åˆ°è¿™äº›æ—¥å¿—ï¼Œè¯´æ˜ï¼š');
console.log('1. å‰ç«¯ä»£ç è¿˜æ²¡æœ‰éƒ¨ç½²');
console.log('2. æµè§ˆå™¨ç¼“å­˜äº†æ—§ä»£ç ');
console.log('3. éœ€è¦å¼ºåˆ¶åˆ·æ–°ï¼ˆCtrl + Shift + Rï¼‰');
```

## ğŸ”§ è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1: å¼ºåˆ¶åˆ·æ–°æ¸…é™¤ç¼“å­˜

1. **Windows**: æŒ‰ `Ctrl + Shift + R`
2. **Mac**: æŒ‰ `Cmd + Shift + R`
3. æˆ–è€…ï¼š
   - æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰
   - å³é”®ç‚¹å‡»åˆ·æ–°æŒ‰é’®
   - é€‰æ‹©"æ¸…ç©ºç¼“å­˜å¹¶ç¡¬æ€§é‡æ–°åŠ è½½"

### æ–¹æ¡ˆ 2: æ£€æŸ¥éƒ¨ç½²çŠ¶æ€

1. ç™»å½• Vercel/Cloudflare æ§åˆ¶å°
2. æŸ¥çœ‹éƒ¨ç½²å†å²
3. ç¡®è®¤æœ€æ–°çš„éƒ¨ç½²æ˜¯å¦åŒ…å«æˆ‘ä»¬çš„ä¿®å¤ï¼ˆæäº¤ `71d2234`ï¼‰

### æ–¹æ¡ˆ 3: ä¸´æ—¶è§£å†³æ–¹æ¡ˆï¼ˆå¦‚æœéƒ¨ç½²éœ€è¦æ—¶é—´ï¼‰

ç”±äºæ‰‹åŠ¨æµ‹è¯•å·²ç»æˆåŠŸï¼Œè¯´æ˜åç«¯ API æ­£å¸¸å·¥ä½œã€‚å¯ä»¥ï¼š

1. **æš‚æ—¶ä½¿ç”¨æ‰‹åŠ¨æµ‹è¯•è„šæœ¬**ï¼ˆæ¯æ¬¡éœ€è¦è®°å½•è®¿é—®æ—¶æ‰§è¡Œï¼‰
2. **ç­‰å¾…å‰ç«¯éƒ¨ç½²å®Œæˆåå†æµ‹è¯•è‡ªåŠ¨ä¸ŠæŠ¥**

## ğŸ“Š éªŒè¯æ­¥éª¤

éƒ¨ç½²å®Œæˆåï¼ŒæŒ‰ä»¥ä¸‹æ­¥éª¤éªŒè¯ï¼š

### æ­¥éª¤ 1: æ¸…é™¤ sessionStorage

```javascript
sessionStorage.clear();
```

### æ­¥éª¤ 2: å¼ºåˆ¶åˆ·æ–°é¡µé¢

æŒ‰ `Ctrl + Shift + R`ï¼ˆWindowsï¼‰æˆ– `Cmd + Shift + R`ï¼ˆMacï¼‰

### æ­¥éª¤ 3: æ£€æŸ¥æ§åˆ¶å°æ—¥å¿—

åº”è¯¥çœ‹åˆ°ï¼š
```
[App] ğŸ” Analytics useEffect triggered
[App] ğŸ” getApiBaseUrl function available: function
[App] ğŸ” sessionStorage rabbit_visit_recorded: null
[App] âœ… Starting to record page visit...
[App] ğŸ” Current API Base URL: https://rabbit-ai-backend.onrender.com/api/
[App] â° Recording page visit now (1 second delay completed)...
[App] ğŸ“¤ Sending visit record: { url: ..., apiBase: ..., data: ... }
[App] ğŸ“¥ Response received: { status: 200, ... }
[App] âœ… Page visit recorded successfully
```

### æ­¥éª¤ 4: æ£€æŸ¥ Network é¢æ¿

1. æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰â†’ Network
2. æœç´¢ `analytics/visit`
3. åº”è¯¥çœ‹åˆ° `POST https://rabbit-ai-backend.onrender.com/api/analytics/visit`
4. çŠ¶æ€ç ï¼š200
5. å“åº”ï¼š`{"ok": true, "message": "Visit recorded"}`

### æ­¥éª¤ 5: æ£€æŸ¥åç«¯æ—¥å¿—

åç«¯æ—¥å¿—åº”è¯¥æ˜¾ç¤ºï¼š
```
[Analytics API] Client IP: ...
[Analytics API] Rate limit check: ...
[Analytics API] Recording visit: ...
[Analytics] Inserting page visit: ...
[Analytics] âœ… Page visit inserted successfully: ...
```

### æ­¥éª¤ 6: æ£€æŸ¥æ•°æ®åº“

åœ¨ Supabase SQL Editor æ‰§è¡Œï¼š
```sql
SELECT * FROM page_visits ORDER BY created_at DESC LIMIT 5;
```

åº”è¯¥çœ‹åˆ°æ–°çš„è®¿é—®è®°å½•ã€‚

---

## ğŸ¯ å½“å‰çŠ¶æ€æ€»ç»“

- âœ… **åç«¯ API**: æ­£å¸¸å·¥ä½œï¼ˆæ‰‹åŠ¨æµ‹è¯•æˆåŠŸï¼‰
- âœ… **ä»£ç ä¿®å¤**: å·²å®Œæˆï¼ˆé™æ€å¯¼å…¥ `getApiBaseUrl`ï¼‰
- â³ **å‰ç«¯éƒ¨ç½²**: ç­‰å¾…éƒ¨ç½²å®Œæˆ
- â³ **æµè§ˆå™¨ç¼“å­˜**: éœ€è¦å¼ºåˆ¶åˆ·æ–°

**ä¸‹ä¸€æ­¥**: ç­‰å¾…å‰ç«¯éƒ¨ç½²å®Œæˆï¼Œç„¶åå¼ºåˆ¶åˆ·æ–°é¡µé¢æµ‹è¯•ã€‚

